services:
  aws-lambda:
    container_name: ${APP_NAME}_aws-lambda
    image: amazon/aws-lambda-nodejs:20
    command: index.handler
    volumes:
      - ./aws-lambda:/var/task
    ports:
      - ${AWS_LAMBDA_PORT}:8080

  di-container:
    container_name: ${APP_NAME}_di-container
    stdin_open: true
    build:
      context: di-container
      dockerfile: Dockerfile
    volumes:
      - "./di-container:/di-container"

  repository:
    container_name: ${APP_NAME}_repository
    stdin_open: true
    build:
      context: repository
      dockerfile: Dockerfile
    volumes:
      - "./repository:/repository"

  mailer:
    container_name: ${APP_NAME}_mailer
    stdin_open: true
    env_file:
      - .env
    ports:
      - ${REACT_EMAIL_PORT}:3000
    build:
      context: mailer
      dockerfile: Dockerfile
    volumes:
      - "./mailer:/mailer"

  mailpit:
    container_name: ${APP_NAME}_mailpit
    image: axllent/mailpit
    ports:
      - "${MAILPIT_PORT}:8025"
      - "${MAILPIT_SMTP_PORT}:1025"
